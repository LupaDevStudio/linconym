#:kivy 2.2.1

<ConfigureTreeScreen>:
    Label:
        text: root.current_level_name
        font_name: PATH_TITLE_FONT
        font_size: TITLE_FONT_SIZE * root.font_ratio
        pos_hint: {"center_x":0.5, "center_y":0.9}
        outline_width: TITLE_OUTLINE_WIDTH
        outline_color: TITLE_OUTLINE_COLOR
        color: TEXT_FONT_COLOR

    RoundedButtonImage:
        id: back_arrow
        image_path: PATH_ICONS + "left_arrow.png"
        pos_hint: POS_HINT_LEFT_TOP_BUTTON
        size_hint: (0.1, None)
        height: self.width
        colors: root.primary_color
        release_function: root.open_levels_screen
        font_ratio: root.font_ratio

    # Stars
    ThreeStars:
        id: three_stars
        pos_hint: {"center_x":0.5, "center_y":0.845}
        size_hint: (0.3, 0.05)
        nb_stars: root.nb_stars
        primary_color: root.primary_color
        secondary_color: root.secondary_color
    
    # Rune
    Image:
        source: PATH_IMAGES + "rune.png"
        size_hint: (None, 0.05)
        width: self.height
        pos_hint: {"center_y":0.795}
        x: root.width/2 - words_to_connect_label.texture_size[0]/2 - self.width - 15 * root.font_ratio

    # Words to connect
    Label:
        id: words_to_connect_label
        text: root.start_word + " > " + root.end_word
        font_name: PATH_TITLE_FONT
        font_size: LABEL_FONT_SIZE * root.font_ratio
        pos_hint: {"center_x":0.5, "center_y":0.795}
        outline_width: BUTTON_OUTLINE_WIDTH * root.font_ratio
        outline_color: TITLE_OUTLINE_COLOR
        color: TEXT_FONT_COLOR

    # Tree
    TreeScrollview:
        id: tree_scrollview
        pos_hint: {"center_x":0.5, "top":0.7675}
        size_hint: (1,0.625)
        bar_color: root.primary_color
        bar_inactive_color: (0,0,0,0)
        font_ratio: root.font_ratio
        primary_color: root.primary_color
        secondary_color: root.secondary_color

        TreeLayout:
            id: tree_layout
            font_ratio: root.font_ratio
            primary_color: root.primary_color
            secondary_color: root.secondary_color
    
    # Reduce screen tree
    RoundedButtonImage:
        image_path: PATH_ICONS + "shrink.png"
        pos_hint: {"x": 0.05, "y": 0.155}
        size_hint: (0.1, None)
        height: self.width
        colors: root.primary_color
        release_function: root.open_game
        font_ratio: root.font_ratio

    # # Reset screen button
    # CustomButton:
    #     text:"Reset the tree"
    #     size_hint: (0.3,0.1)
    #     pos_hint: {"center_x":0.2, "y":0.025}
    #     release_function: root.ask_reset_tree
    #     font_size: LETTER_FONT_SIZE
    #     text_font_name: PATH_TITLE_FONT
    #     font_ratio: root.font_ratio

    # Display / hide completed paths
    SelectCircleButtonWithText:
        text: "Hide completed paths"
        pos_hint: {"center_x":0.5,"y":0.025}
        size_hint: (0.5,0.1)
        font_size: LETTER_FONT_SIZE
        font_ratio: root.font_ratio
        is_using: root.hide_completed_branches
        release_function: root.display_hide_path
