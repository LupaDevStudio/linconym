#:kivy 2.2.1

<ActButton>:

    # Background
    canvas.before:
        Color:
            rgba: self.background_color
        RoundedRectangle:
            pos:(0,0)
            size:self.size
            radius:[40*root.font_ratio,]

    # Act title
    Label:
        id: act_title_label
        text: root.act_title
        pos_hint: { "center_x":0.5,"center_y":0.7}
        size_hint: (1,0.5)
        text_size: (root.width*0.8,None)
        font_size: root.font_ratio * root.font_size
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)

    # Stars
    ThreeStars:
        id: three_stars
        pos_hint: {"center_x":0.35, "center_y":0.25}
        size_hint: (0.5,0.45)
        nb_stars: root.nb_stars
        primary_color: root.primary_color
        secondary_color: root.secondary_color
        opacity: 1 if root.disabled is False else 0

    # Completion
    Label:
        id: completion_label
        text: root.completion_text
        pos_hint: {"center_x":0.8, "center_y":0.25}
        size_hint: (0.3,0.5)
        font_size: root.font_ratio * root.font_size
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)
        opacity: 1 if root.disabled is False else 0

    # Lock
    Image:
        id: lock_image
        source: PATH_ICONS + "lock.png"
        pos_hint: {"center_x":0.35, "center_y":0.25}
        size_hint: (0.4,0.4)
        opacity: 0 if root.disabled is False else 1
    
    # Unlock
    Label:
        id: unlock_label
        text: root.unlock_text
        pos_hint: {"center_x":0.5, "center_y":0.25}
        size_hint: (None,0.5)
        font_size: root.font_ratio * root.font_size
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)
        opacity: 0 if root.disabled is False else 1
    
    # Star image
    Image:
        id: star_one
        pos_hint: {"center_x":0.65, "center_y":0.25}
        size_hint: (0.5,0.4)
        source: PATH_ICONS + "star_full.png"
        fit_mode: "contain"
        color: root.primary_color
        opacity: 0 if root.disabled is False else 1
    Image:
        id: star_one_contour
        pos_hint: {"center_x":0.65, "center_y":0.25}
        size_hint: (0.5,0.4)
        source: PATH_ICONS + "star.png"
        fit_mode: "contain"
        color: (0,0,0,1)
        opacity: 0 if root.disabled is False else 1

