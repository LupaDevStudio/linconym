#:kivy 2.2.1

<ActButton>:

    # Background
    canvas.before:
        Color:
            rgba: CUSTOM_BUTTON_BACKGROUND_COLOR if not self.disable_button else CLOUD_GREY_BACKGROUND_COLOR
        RoundedRectangle:
            pos:(0,0)
            size:self.size
            radius:[20*root.font_ratio,]
        Color:
            rgba: (0,0,0,1) if root.disable_button is False else (0,0,0,0)
        Line:
            points: [self.width/2,self.height*1/8,self.width/2, self.height*3/8]
            width: 1*root.font_ratio

    # Act title
    Label:
        id: act_title_label
        text: root.act_title
        pos_hint: { "center_x":0.5,"center_y":0.7}
        size_hint: (1,0.5)
        text_size: (root.width*0.8,None)
        font_size: root.font_ratio * root.font_size
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)

    # Stars
    ThreeStars:
        id: three_stars
        pos_hint: {"center_x":0.25, "center_y":0.25}
        size_hint: (0.4,0.3)
        nb_stars: root.nb_stars
        primary_color: root.primary_color
        secondary_color: root.secondary_color
        opacity: 1 if root.disable_button is False else 0
        force_border: True

    # Completion
    Label:
        id: completion_label
        text: root.completion_text
        pos_hint: {"center_x":0.75, "center_y":0.25}
        size_hint: (0.4,0.5)
        font_size: root.font_ratio * root.font_size * 0.9
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)
        opacity: 1 if root.disable_button is False else 0

    # Lock
    Image:
        id: lock_image
        source: PATH_ICONS + "lock.png"
        pos_hint: {"center_x":0.05, "center_y":0.95}
        size_hint: (0.2,0.3)
        opacity: 0 if root.disable_button is False else 1
        color: root.primary_color

    # Unlock
    Label:
        id: unlock_label
        text: root.unlock_text
        pos_hint: {"center_x":0.5, "center_y":0.25}
        size_hint: (None,0.5)
        font_size: root.font_ratio * root.font_size
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        color: (0,0,0,1)
        opacity: 0 if root.disable_button is False else 1

    # Star image
    Image:
        pos_hint: {"center_x":0.75, "center_y":0.275}
        size_hint: (0.5,0.3)
        source: PATH_ICONS + "star_full.png"
        fit_mode: "contain"
        color: root.secondary_color
        opacity: 0 if root.disable_button is False else 1
    Image:
        pos_hint: {"center_x":0.75, "center_y":0.275}
        size_hint: (0.5,0.3)
        source: PATH_ICONS + "star.png"
        fit_mode: "contain"
        color: (0,0,0,1)
        opacity: 0 if root.disable_button is False else 1
    
    # Star image
    Image:
        pos_hint: {"center_x":0.25, "center_y":0.275}
        size_hint: (0.5,0.3)
        source: PATH_ICONS + "star_full.png"
        fit_mode: "contain"
        color: root.secondary_color
        opacity: 0 if root.disable_button is False else 1
    Image:
        pos_hint: {"center_x":0.25, "center_y":0.275}
        size_hint: (0.5,0.3)
        source: PATH_ICONS + "star.png"
        fit_mode: "contain"
        color: (0,0,0,1)
        opacity: 0 if root.disable_button is False else 1
