#:kivy 2.2.1

<ColoredRoundedButton>:

    # Background
    canvas.before:
        # Shadow
        Color:
            rgba: (0, 0, 0, 1) if not(root.disable_button) and not(root.disabled) else (0,0,0,0)   
        BoxShadow:
            pos: (0, 0)
            size: self.size
            offset: 5*self.font_ratio, -5*self.font_ratio
            spread_radius: -10*self.font_ratio, -10*self.font_ratio
            blur_radius: 20*self.font_ratio
            border_radius: [12*root.font_ratio,12*root.font_ratio,12*root.font_ratio,12*root.font_ratio]
        # Rounded rectangle
        Color:
            rgba: self.background_color
        RoundedRectangle:
            pos:(0, 0)
            size:self.size
            radius: [12*root.font_ratio]
        # Border
        Color:
            rgba: self.outline_color
        Line:
            width: BUTTON_OUTLINE_WIDTH*self.font_ratio
            rounded_rectangle: (-BUTTON_OUTLINE_WIDTH/2, -BUTTON_OUTLINE_WIDTH/2, self.size[0]+BUTTON_OUTLINE_WIDTH,self.size[1]+BUTTON_OUTLINE_WIDTH, 12*root.font_ratio, 12*root.font_ratio, 12*root.font_ratio, 12*root.font_ratio)

    # Main text
    Label:
        text: root.text
        font_size: root.font_ratio * root.font_size
        pos: (1, 0)
        size: self.size
        shorten: False
        text_size: (root.width*root.text_filling_ratio, None)
        font_name: root.text_font_name
        halign: "center"
        valign: "center"
        line_height: 1
        color: root.color_label
